# EKS 3-Tier Infrastructure with Terragrunt

[![Terraform](https://img.shields.io/badge/Terraform-%E2%89%A51.0-623CE4?logo=terraform)](https://www.terraform.io)
[![Terragrunt](https://img.shields.io/badge/Terragrunt-%E2%89%A50.36-259539?logo=terragrunt)](https://terragrunt.gruntwork.io/)
[![AWS](https://img.shields.io/badge/AWS-Infrastructure-232F3E?logo=amazon-aws)](https://aws.amazon.com/)

## Overview

This project defines and deploys a standard 3-tier application infrastructure on AWS using reusable Terraform modules orchestrated by Terragrunt. It creates distinct, isolated environments (`dev`, `staging`, `prod`) each containing:

1.  **VPC:** A dedicated Virtual Private Cloud with public and private subnets across multiple Availability Zones (AZs) for network isolation and high availability. Includes NAT Gateways for outbound internet access from private subnets.
2.  **EKS Cluster:** An Amazon Elastic Kubernetes Service cluster with managed node groups deployed into the private subnets. Includes configuration for core add-ons (CoreDNS, Kube Proxy, VPC CNI) and an IAM OIDC provider for secure pod access to AWS services (IRSA).
3.  **RDS Instance:** An Amazon Relational Database Service instance (PostgreSQL) deployed into the private subnets, with credentials managed via AWS Secrets Manager.

Terragrunt is used to keep the infrastructure code DRY (Don't Repeat Yourself) by defining common configurations and leveraging shared Terraform modules.

## Architecture

The following diagram illustrates the high-level architecture within a single environment (e.g., dev):

```mermaid
graph TD
    subgraph AWS Cloud Region (e.g., eu-west-1)
        subgraph VPC (e.g., 10.0.0.0/16)
            subgraph Availability Zone 1 (e.g., eu-west-1a)
                subgraph Public Subnet 1
                    NAT1[NAT Gateway 1]
                end
                subgraph Private Subnet 1
                    EKSNode1[EKS Node]
                    RDS1[RDS Instance (Primary/Standby)]
                end
            end
            subgraph Availability Zone 2 (e.g., eu-west-1b)
                subgraph Public Subnet 2
                    NAT2[NAT Gateway 2]
                end
                subgraph Private Subnet 2
                    EKSNode2[EKS Node]
                    RDS2[RDS Instance (Standby/Primary)]
                end
            end

            IGW[Internet Gateway] --> RT_Public[Public Route Table]
            RT_Public --> PublicSubnet1 & PublicSubnet2
            PublicSubnet1 --> NAT1
            PublicSubnet2 --> NAT2
            
            PrivateSubnet1 --> RT_Private1[Private Route Table 1]
            PrivateSubnet2 --> RT_Private2[Private Route Table 2]
            RT_Private1 --> NAT1
            RT_Private2 --> NAT2
            
            EKSControl[EKS Control Plane] --> EKSNode1 & EKSNode2
            EKSNode1 & EKSNode2 --> KubeProxy & CoreDNS & CNI[(VPC CNI)]
            AppServer[App Servers (Pods)] --> EKSNode1 & EKSNode2
            AppServer --> RDS1 & RDS2
        end
        
        SecretsManager[(AWS Secrets Manager<br/>Stores RDS Credentials)]
        S3[(S3 Bucket<br/>Stores Terraform State)]
        DynamoDB[(DynamoDB Table<br/>Handles State Locking)]
    end

    User[Developer/Admin] -->|kubectl/AWS CLI| EKSControl
    User -->|Terraform/Terragrunt| AWS_API[AWS API]
    AWS_API --> VPC & EKSControl & EKSNode1 & EKSNode2 & RDS1 & RDS2 & NAT1 & NAT2 & IGW & SecretsManager & S3 & DynamoDB

    style VPC fill:#f9f,stroke:#333,stroke-width:2px
    style PublicSubnet1 fill:#ccf,stroke:#333
    style PublicSubnet2 fill:#ccf,stroke:#333
    style PrivateSubnet1 fill:#cdf,stroke:#333
    style PrivateSubnet2 fill:#cdf,stroke:#333
    style EKSControl fill:#ffcc00,stroke:#333
    style RDS1 fill:#lightblue,stroke:#333
    style RDS2 fill:#lightblue,stroke:#333
```

## Prerequisites

*   **AWS Account:** An active AWS account with necessary permissions to create VPC, EKS, RDS, IAM roles/policies, S3 buckets, DynamoDB tables, Security Groups, NAT Gateways, etc.
*   **AWS CLI:** Configured with credentials for your AWS account (`aws configure`). [Installation Guide](https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html)
*   **Terraform:** Version 1.0 or later. [Installation Guide](https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli)
*   **Terragrunt:** Version 0.36 or later. [Installation Guide](https://terragrunt.gruntwork.io/docs/getting-started/install/)
*   **kubectl:** To interact with the EKS cluster. [Installation Guide](https://kubernetes.io/docs/tasks/tools/install-kubectl/)
*   **(Optional) Docker:** If you intend to build and push container images for deployment onto EKS.

## Directory Structure

```
.
├── live/                # Environment-specific configurations
│   ├── dev/             # Development environment
│   │   ├── env.hcl      # Dev environment variables (e.g., region)
│   │   ├── vpc/         # VPC configuration for Dev
│   │   │   └── terragrunt.hcl
│   │   ├── eks/         # EKS configuration for Dev
│   │   │   └── terragrunt.hcl
│   │   └── rds/         # RDS configuration for Dev
│   │       └── terragrunt.hcl
│   ├── staging/         # Staging environment (similar structure to dev)
│   │   ├── env.hcl
│   │   ├── vpc/
│   │   │   └── terragrunt.hcl
│   │   ├── ...
│   └── prod/            # Production environment (similar structure to dev)
│       ├── env.hcl
│       ├── vpc/
│       │   └── terragrunt.hcl
│       ├── ...
├── modules/             # Reusable Terraform modules
│   ├── vpc/             # VPC module (main.tf, variables.tf, outputs.tf)
│   ├── eks/             # EKS module (main.tf, variables.tf, outputs.tf)
│   └── rds/             # RDS module (main.tf, variables.tf, outputs.tf)
├── root.hcl             # Root Terragrunt configuration (backend, provider defaults)
├── .gitignore
└── README.md            # This file
```

*   **`modules/`**: Contains reusable Terraform modules (VPC, EKS, RDS). Each module defines the actual AWS resources.
*   **`live/`**: Contains environment-specific Terragrunt configurations (`dev`, `staging`, `prod`).
    *   Each environment (`dev`, `staging`, `prod`) has its own `env.hcl` defining environment-wide variables (like AWS region).
    *   Within each environment, subdirectories (`vpc`, `eks`, `rds`) contain `terragrunt.hcl` files that configure and invoke the corresponding module from `modules/`, passing environment-specific inputs and managing dependencies.
*   **`root.hcl`**: The top-level Terragrunt configuration included by all other `terragrunt.hcl` files. It defines the Terraform backend (S3 + DynamoDB) and default provider settings.

## Backend Setup (One-Time Task)

This project uses an S3 bucket for storing Terraform state and a DynamoDB table for state locking, configured in `root.hcl`. **You need to create these resources manually in AWS before deploying the infrastructure.**

1.  **Choose an AWS Region for the Backend:** The `root.hcl` currently specifies `eu-west-2` (London) for the backend resources. You can change this if needed, but ensure the bucket and table are created in the *same* region specified in `root.hcl`.
2.  **Create S3 Bucket:**
    *   Name: `tf-state-bucket-mo` (must be globally unique, change if needed in `root.hcl`)
    *   Region: `eu-west-2` (or your chosen backend region)
    *   Enable versioning and server-side encryption for security.
3.  **Create DynamoDB Table:**
    *   Table Name: `go-app-state-lock` (change if needed in `root.hcl`)
    *   Primary Key: `LockID` (Type: String)
    *   Region: `eu-west-2` (must match bucket region)
    *   Use default settings for capacity.

## Deployment

Terragrunt manages dependencies between components (e.g., EKS depends on VPC). You deploy one environment at a time.

**General Workflow:**

1.  **Navigate to the environment directory:** `cd live/<environment>` (e.g., `cd live/dev`)
2.  **Deploy components in order:** Deploy dependencies first.
    *   `cd vpc && terragrunt plan` (Review the plan)
    *   `cd vpc && terragrunt apply` (Deploy the VPC)
    *   `cd ../eks && terragrunt plan` (Review the plan)
    *   `cd ../eks && terragrunt apply` (Deploy EKS after VPC is ready)
    *   `cd ../rds && terragrunt plan` (Review the plan)
    *   `cd ../rds && terragrunt apply` (Deploy RDS after VPC is ready)
3.  **(Alternative) Deploy all components:** Terragrunt can deploy all components within an environment respecting dependencies (if defined correctly).
    *   From the environment directory (`live/dev`):
        *   `terragrunt run-all plan` (Review plans for all components)
        *   `terragrunt run-all apply` (Apply all components)

**Example: Deploying the `dev` environment:**

```bash
# Navigate to the dev environment directory
cd live/dev

# Option 1: Deploy component by component (Recommended for clarity)

# Deploy VPC
cd vpc
terragrunt plan
# Review plan, then:
terragrunt apply

# Deploy EKS (depends on VPC)
cd ../eks
terragrunt plan
# Review plan, then:
terragrunt apply

# Deploy RDS (depends on VPC)
cd ../rds
terragrunt plan
# Review plan, then:
terragrunt apply

# Option 2: Deploy all at once (from live/dev)
# terragrunt run-all plan
# Review plans, then:
# terragrunt run-all apply 
```

Repeat the process for `staging` and `prod` environments by navigating to `live/staging` or `live/prod`.

## Accessing Outputs

After deployment, important outputs like the EKS cluster endpoint, RDS endpoint, or security group IDs can be viewed using the `terragrunt output` command within the respective component directory (e.g., `cd live/dev/eks && terragrunt output`).

## Cleaning Up

To destroy the infrastructure for an environment, run `terragrunt destroy` within each component directory in the reverse order of creation (RDS, EKS, then VPC), or use `terragrunt run-all destroy` from the environment directory (`live/<environment>`).

**Example: Destroying the `dev` environment:**

```bash
cd live/dev

# Option 1: Destroy component by component (Reverse Order)
cd rds && terragrunt destroy
cd ../eks && terragrunt destroy
cd ../vpc && terragrunt destroy

# Option 2: Destroy all at once (from live/dev)
# terragrunt run-all destroy 
```

# AWS Infrastructure as Code (IaC) - 3 Environment Setup

## Architecture

The following diagram illustrates the high-level architecture within a single environment (e.g., dev):

```mermaid
graph TD
    Internet[Internet] --> ALB[Application Load Balancer]
    ALB --> EC2_1[EC2 Instance 1]
    ALB --> EC2_2[EC2 Instance 2]
    EC2_1 --> RDS[RDS Database]
    EC2_2 --> RDS

    subgraph VPC
        subgraph Public Subnet
            ALB
        end
        subgraph Private Subnet 1
            EC2_1
            EC2_2
        end
        subgraph Private Subnet 2
            RDS
        end
    end
```

### Components

1. **VPC (Virtual Private Cloud)**
   - Public Subnet: Hosts the Application Load Balancer
   - Private Subnet 1: Hosts EC2 instances
   - Private Subnet 2: Hosts RDS database

2. **Application Load Balancer (ALB)**
   - Distributes incoming traffic across EC2 instances
   - Provides SSL termination
   - Handles health checks

3. **EC2 Instances**
   - Hosts the application
   - Auto-scaling enabled
   - Deployed in private subnets for security

4. **RDS Database**
   - Managed database service
   - Deployed in private subnet
   - Multi-AZ deployment for high availability

## Environment Structure

This project manages three separate environments:
- Development (dev)
- Staging (staging)
- Production (prod)

Each environment follows the same architecture pattern but with different configurations and resource sizes appropriate for their purpose.


























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































# EKS 3-Tier Infrastructure with Terragrunt

[![Terraform](https://img.shields.io/badge/Terraform-%E2%89%A51.0-623CE4?logo=terraform)](https://www.terraform.io)
[![Terragrunt](https://img.shields.io/badge/Terragrunt-%E2%89%A50.36-259539?logo=terragrunt)](https://terragrunt.gruntwork.io/)
[![AWS](https://img.shields.io/badge/AWS-Infrastructure-232F3E?logo=amazon-aws)](https://aws.amazon.com/)

## Overview

This project defines and deploys a standard 3-tier application infrastructure on AWS using reusable Terraform modules orchestrated by Terragrunt. It creates distinct, isolated environments (`dev`, `staging`, `prod`) each containing:

1.  **VPC:** A dedicated Virtual Private Cloud with public and private subnets across multiple Availability Zones (AZs) for network isolation and high availability. Includes NAT Gateways for outbound internet access from private subnets.
2.  **EKS Cluster:** An Amazon Elastic Kubernetes Service cluster with managed node groups deployed into the private subnets. Includes configuration for core add-ons (CoreDNS, Kube Proxy, VPC CNI) and an IAM OIDC provider for secure pod access to AWS services (IRSA).
3.  **RDS Instance:** An Amazon Relational Database Service instance (PostgreSQL) deployed into the private subnets, with credentials managed via AWS Secrets Manager.

Terragrunt is used to keep the infrastructure code DRY (Don't Repeat Yourself) by defining common configurations and leveraging shared Terraform modules.

## Architecture

The following diagram illustrates the high-level architecture within a single environment (e.g., dev):

```mermaid
graph TD
    subgraph AWS Cloud Region (e.g., eu-west-1)
        subgraph VPC (e.g., 10.0.0.0/16)
            subgraph Availability Zone 1 (e.g., eu-west-1a)
                subgraph Public Subnet 1
                    NAT1[NAT Gateway 1]
                end
                subgraph Private Subnet 1
                    EKSNode1[EKS Node]
                    RDS1[RDS Instance (Primary/Standby)]
                end
            end
            subgraph Availability Zone 2 (e.g., eu-west-1b)
                subgraph Public Subnet 2
                    NAT2[NAT Gateway 2]
                end
                subgraph Private Subnet 2
                    EKSNode2[EKS Node]
                    RDS2[RDS Instance (Standby/Primary)]
                end
            end

            IGW[Internet Gateway] --> RT_Public[Public Route Table]
            RT_Public --> PublicSubnet1 & PublicSubnet2
            PublicSubnet1 --> NAT1
            PublicSubnet2 --> NAT2
            
            PrivateSubnet1 --> RT_Private1[Private Route Table 1]
            PrivateSubnet2 --> RT_Private2[Private Route Table 2]
            RT_Private1 --> NAT1
            RT_Private2 --> NAT2
            
            EKSControl[EKS Control Plane] --> EKSNode1 & EKSNode2
            EKSNode1 & EKSNode2 --> KubeProxy & CoreDNS & CNI[(VPC CNI)]
            AppServer[App Servers (Pods)] --> EKSNode1 & EKSNode2
            AppServer --> RDS1 & RDS2
        end
        
        SecretsManager[(AWS Secrets Manager<br/>Stores RDS Credentials)]
        S3[(S3 Bucket<br/>Stores Terraform State)]
        DynamoDB[(DynamoDB Table<br/>Handles State Locking)]
    end

    User[Developer/Admin] -->|kubectl/AWS CLI| EKSControl
    User -->|Terraform/Terragrunt| AWS_API[AWS API]
    AWS_API --> VPC & EKSControl & EKSNode1 & EKSNode2 & RDS1 & RDS2 & NAT1 & NAT2 & IGW & SecretsManager & S3 & DynamoDB

    style VPC fill:#f9f,stroke:#333,stroke-width:2px
    style PublicSubnet1 fill:#ccf,stroke:#333
    style PublicSubnet2 fill:#ccf,stroke:#333
    style PrivateSubnet1 fill:#cdf,stroke:#333
    style PrivateSubnet2 fill:#cdf,stroke:#333
    style EKSControl fill:#ffcc00,stroke:#333
    style RDS1 fill:#lightblue,stroke:#333
    style RDS2 fill:#lightblue,stroke:#333
```

## Prerequisites

*   **AWS Account:** An active AWS account with necessary permissions to create VPC, EKS, RDS, IAM roles/policies, S3 buckets, DynamoDB tables, Security Groups, NAT Gateways, etc.
*   **AWS CLI:** Configured with credentials for your AWS account (`aws configure`). [Installation Guide](https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html)
*   **Terraform:** Version 1.0 or later. [Installation Guide](https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli)
*   **Terragrunt:** Version 0.36 or later. [Installation Guide](https://terragrunt.gruntwork.io/docs/getting-started/install/)
*   **kubectl:** To interact with the EKS cluster. [Installation Guide](https://kubernetes.io/docs/tasks/tools/install-kubectl/)
*   **(Optional) Docker:** If you intend to build and push container images for deployment onto EKS.

## Directory Structure

```
.
├── live/                # Environment-specific configurations
│   ├── dev/             # Development environment
│   │   ├── env.hcl      # Dev environment variables (e.g., region)
│   │   ├── vpc/         # VPC configuration for Dev
│   │   │   └── terragrunt.hcl
│   │   ├── eks/         # EKS configuration for Dev
│   │   │   └── terragrunt.hcl
│   │   └── rds/         # RDS configuration for Dev
│   │       └── terragrunt.hcl
│   ├── staging/         # Staging environment (similar structure to dev)
│   │   ├── env.hcl
│   │   ├── vpc/
│   │   │   └── terragrunt.hcl
│   │   ├── ...
│   └── prod/            # Production environment (similar structure to dev)
│       ├── env.hcl
│       ├── vpc/
│       │   └── terragrunt.hcl
│       ├── ...
├── modules/             # Reusable Terraform modules
│   ├── vpc/             # VPC module (main.tf, variables.tf, outputs.tf)
│   ├── eks/             # EKS module (main.tf, variables.tf, outputs.tf)
│   └── rds/             # RDS module (main.tf, variables.tf, outputs.tf)
├── root.hcl             # Root Terragrunt configuration (backend, provider defaults)
├── .gitignore
└── README.md            # This file
```

*   **`modules/`**: Contains reusable Terraform modules (VPC, EKS, RDS). Each module defines the actual AWS resources.
*   **`live/`**: Contains environment-specific Terragrunt configurations (`dev`, `staging`, `prod`).
    *   Each environment (`dev`, `staging`, `prod`) has its own `env.hcl` defining environment-wide variables (like AWS region).
    *   Within each environment, subdirectories (`vpc`, `eks`, `rds`) contain `terragrunt.hcl` files that configure and invoke the corresponding module from `modules/`, passing environment-specific inputs and managing dependencies.
*   **`root.hcl`**: The top-level Terragrunt configuration included by all other `terragrunt.hcl` files. It defines the Terraform backend (S3 + DynamoDB) and default provider settings.

## Backend Setup (One-Time Task)

This project uses an S3 bucket for storing Terraform state and a DynamoDB table for state locking, configured in `root.hcl`. **You need to create these resources manually in AWS before deploying the infrastructure.**

1.  **Choose an AWS Region for the Backend:** The `root.hcl` currently specifies `eu-west-2` (London) for the backend resources. You can change this if needed, but ensure the bucket and table are created in the *same* region specified in `root.hcl`.
2.  **Create S3 Bucket:**
    *   Name: `tf-state-bucket-mo` (must be globally unique, change if needed in `root.hcl`)
    *   Region: `eu-west-2` (or your chosen backend region)
    *   Enable versioning and server-side encryption for security.
3.  **Create DynamoDB Table:**
    *   Table Name: `go-app-state-lock` (change if needed in `root.hcl`)
    *   Primary Key: `LockID` (Type: String)
    *   Region: `eu-west-2` (must match bucket region)
    *   Use default settings for capacity.

## Deployment

Terragrunt manages dependencies between components (e.g., EKS depends on VPC). You deploy one environment at a time.

**General Workflow:**

1.  **Navigate to the environment directory:** `cd live/<environment>` (e.g., `cd live/dev`)
2.  **Deploy components in order:** Deploy dependencies first.
    *   `cd vpc && terragrunt plan` (Review the plan)
    *   `cd vpc && terragrunt apply` (Deploy the VPC)
    *   `cd ../eks && terragrunt plan` (Review the plan)
    *   `cd ../eks && terragrunt apply` (Deploy EKS after VPC is ready)
    *   `cd ../rds && terragrunt plan` (Review the plan)
    *   `cd ../rds && terragrunt apply` (Deploy RDS after VPC is ready)
3.  **(Alternative) Deploy all components:** Terragrunt can deploy all components within an environment respecting dependencies (if defined correctly).
    *   From the environment directory (`live/dev`):
        *   `terragrunt run-all plan` (Review plans for all components)
        *   `terragrunt run-all apply` (Apply all components)

**Example: Deploying the `dev` environment:**

```bash
# Navigate to the dev environment directory
cd live/dev

# Option 1: Deploy component by component (Recommended for clarity)

# Deploy VPC
cd vpc
terragrunt plan
# Review plan, then:
terragrunt apply

# Deploy EKS (depends on VPC)
cd ../eks
terragrunt plan
# Review plan, then:
terragrunt apply

# Deploy RDS (depends on VPC)
cd ../rds
terragrunt plan
# Review plan, then:
terragrunt apply

# Option 2: Deploy all at once (from live/dev)
# terragrunt run-all plan
# Review plans, then:
# terragrunt run-all apply 
```

Repeat the process for `staging` and `prod` environments by navigating to `live/staging` or `live/prod`.

## Accessing Outputs

After deployment, important outputs like the EKS cluster endpoint, RDS endpoint, or security group IDs can be viewed using the `terragrunt output` command within the respective component directory (e.g., `cd live/dev/eks && terragrunt output`).

## Cleaning Up

To destroy the infrastructure for an environment, run `terragrunt destroy` within each component directory in the reverse order of creation (RDS, EKS, then VPC), or use `terragrunt run-all destroy` from the environment directory (`live/<environment>`).

**Example: Destroying the `dev` environment:**

```bash
cd live/dev

# Option 1: Destroy component by component (Reverse Order)
cd rds && terragrunt destroy
cd ../eks && terragrunt destroy
cd ../vpc && terragrunt destroy

# Option 2: Destroy all at once (from live/dev)
# terragrunt run-all destroy 
```

# AWS Infrastructure as Code (IaC) - 3 Environment Setup

## Architecture

The following diagram illustrates the high-level architecture within a single environment (e.g., dev):

```mermaid
graph TD
    subgraph AWS Cloud Region
        subgraph VPC
            subgraph Public Subnet
                ALB[Application Load Balancer]
            end
            
            subgraph Private Subnet 1
                EC2_1[EC2 Instance]
                EC2_2[EC2 Instance]
            end
            
            subgraph Private Subnet 2
                RDS[RDS Database]
            end
        end
    end

    Internet --> ALB
    ALB --> EC2_1
    ALB --> EC2_2
    EC2_1 --> RDS
    EC2_2 --> RDS
```

### Components

1. **VPC (Virtual Private Cloud)**
   - Public Subnet: Hosts the Application Load Balancer
   - Private Subnet 1: Hosts EC2 instances
   - Private Subnet 2: Hosts RDS database

2. **Application Load Balancer (ALB)**
   - Distributes incoming traffic across EC2 instances
   - Provides SSL termination
   - Handles health checks

3. **EC2 Instances**
   - Hosts the application
   - Auto-scaling enabled
   - Deployed in private subnets for security

4. **RDS Database**
   - Managed database service
   - Deployed in private subnet
   - Multi-AZ deployment for high availability

## Environment Structure

This project manages three separate environments:
- Development (dev)
- Staging (staging)
- Production (prod)

Each environment follows the same architecture pattern but with different configurations and resource sizes appropriate for their purpose.


































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































